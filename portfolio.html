<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>포트폴리오 - 원스톱 벌초</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/common.css"> <!-- common 스타일 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* 추가적인 스타일 */
        .portfolio-item {
            margin-bottom: 20px;
        }
    </style>
    <style>
        #loadingIndicator {
            display: none;
            text-align: center;
            padding: 20px;
        }
    </style>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
    <nav id="nav-container"></nav>
    <div id="loadingIndicator">Loading...</div>

    <div class="container mt-5">
        <h1>우리의 작업</h1>
        <p>다양한 포트폴리오를 확인해보세요.</p>

        <!-- 포트폴리오 아이템 그리드 -->
        <div class="row" id="portfolio-grid">
            <!-- 포트폴리오 아이템 예시 (반복될 부분) -->
            <!-- <div class="col-md-4 portfolio-item">
                <div class="card">
                    <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="포트폴리오 이미지 1">
                    <div class="card-body">
                        <h5 class="card-title">작업 제목 1</h5>
                        <p class="card-text">작업에 대한 간단한 설명.</p>
                        <a href="#" class="btn btn-primary">자세히 보기</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4 portfolio-item">
                <div class="card">
                    <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="포트폴리오 이미지 2">
                    <div class="card-body">
                        <h5 class="card-title">작업 제목 2</h5>
                        <p class="card-text">작업에 대한 간단한 설명.</p>
                        <a href="#" class="btn btn-primary">자세히 보기</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4 portfolio-item">
                <div class="card">
                    <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="포트폴리오 이미지 3">
                    <div class="card-body">
                        <h5 class="card-title">작업 제목 3</h5>
                        <p class="card-text">작업에 대한 간단한 설명.</p>
                        <a href="#" class="btn btn-primary">자세히 보기</a>
                    </div>
                </div>
            </div> -->
            <!-- 추가적인 아이템 -->
        </div>

        <!-- 상세 보기 (숨겨진 상태, 필요시 표시) -->
        <div id="portfolio-detail" style="display: none;">
            <h2>상세 내용</h2>
            <img src="https://via.placeholder.com/600x400" alt="상세 이미지" class="img-fluid">
            <p>상세 설명 내용...</p>
            <button onclick="hideDetailView()" class="btn btn-secondary">목록으로 돌아가기</button>
        </div>

        <div class="mt-5">
            <a href="index.html" class="btn btn-secondary">홈으로 돌아가기</a>
        </div>
    </div>

    <footer class="text-center py-3 shadow-sm" id="footer-container"></footer>

    <!-- 다크 모드 토글 버튼 -->
    <button id="toggleDarkModeButton" class="btn btn-outline-light dark-mode-btn"><i class="fas fa-moon"></i></button>

    <!-- Bootstrap JS (Popper.js 포함) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="/scripts/nav.js" type="module" defer></script>
    <script src="/scripts/footer.js" type="module" defer></script>
    <script src="/scripts/common.js" defer></script>
    <script type="module">
        import { db } from '/scripts/firebase-config.js';
        import { collection, query, getDocs } from 'https://www.gstatic.com/firebasejs/11.5.0/firebase-firestore.js';

        const loadingIndicator = document.getElementById('loadingIndicator');
        const portfolioGrid = document.getElementById('portfolio-grid');
        const portfolioCollection = collection(db, 'portfolio');
        const q = query(portfolioCollection);

        // 로딩 인디케이터 표시
        loadingIndicator.style.display = 'block';

        try {
            const querySnapshot = await getDocs(q);
            // 로딩 인디케이터 숨김
            loadingIndicator.style.display = 'none';
            
            querySnapshot.forEach((doc) => {
                console.log('doc :', doc)
                const data = doc.data();
                portfolioGrid.innerHTML += `
                <div class="col-md-4 portfolio-item">
                    <div class="card">
                        <img src="${data.imageUrl}" class="card-img-top" alt="${data.title}">
                        <div class="card-body">
                            <h5 class="card-title">${data.title}</h5>
                            <p class="card-text">${data.description}</p>
                            <a href="#" class="btn btn-primary" onclick="showDetailView('${doc.id}')">자세히 보기</a>
                        </div>
                    </div>
                </div>`;
            });
        } catch (error) {
            // 로딩 인디케이터 숨김
            loadingIndicator.style.display = 'none';
            console.error('Error fetching portfolio data:', error);
            portfolioGrid.innerHTML = '<p>데이터를 불러오는 중 오류가 발생했습니다.</p>';
        }

        // 상세 보기 표시 함수 (예시)
        function showDetailView(itemId) {
            // itemId를 사용하여 상세 내용 로드
            document.getElementById('portfolio-grid').style.display = 'none';
            document.getElementById('portfolio-detail').style.display = 'block';
        }

        // 상세 보기 숨기기 함수 (예시)
        function hideDetailView() {
            document.getElementById('portfolio-grid').style.display = 'grid';
            document.getElementById('portfolio-detail').style.display = 'none';
        }
    </script>
</body>
</html>