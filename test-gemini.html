<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>제미나이 API 테스트</title>
    <script>
        // API 키 설정
        const GEMINI_API_KEY = 'AIzaSyBBHv-isFTKlAr0XMkuNp-Lzd2an-QDb_0';
        
        // 테스트 함수
        async function testGeminiAPI() {
            try {
                console.log('제미나이 API 테스트 시작...');
                
                // API 호출
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `
                                서울 강남구의 벌초 서비스에 대한 뉴스 기사를 작성해주세요.
                                다음 형식으로 작성해주세요:
                                1. 제목 (첫 줄)
                                2. 본문 (2줄 이상)
                                `
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('API 응답:', errorData);
                    throw new Error(`API 호출 실패: ${errorData.error?.message || '알 수 없는 오류'}`);
                }

                const data = await response.json();
                console.log('API 응답 데이터:', data);
                
                if (!data.candidates || !data.candidates[0]?.content?.parts?.[0]?.text) {
                    throw new Error('API 응답 형식이 올바르지 않습니다.');
                }

                const generatedText = data.candidates[0].content.parts[0].text;
                
                // 결과 표시
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = `
                    <h3>생성된 콘텐츠:</h3>
                    <pre>${generatedText}</pre>
                `;
                
                console.log('생성된 콘텐츠:', generatedText);
            } catch (error) {
                console.error('API 테스트 중 오류:', error);
                document.getElementById('result').innerHTML = `
                    <div class="error">
                        <h3>오류 발생:</h3>
                        <pre>${error.message}</pre>
                    </div>
                `;
            }
        }

        // 페이지 로드 시 테스트 실행
        window.addEventListener('DOMContentLoaded', testGeminiAPI);
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        pre {
            white-space: pre-wrap;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
        }
        .error {
            color: red;
            background-color: #fff0f0;
            padding: 15px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>제미나이 API 테스트</h1>
    <div id="result">
        <p>테스트 진행 중...</p>
    </div>
</body>
</html> 