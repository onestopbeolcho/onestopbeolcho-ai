<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>개발 계획 | 원스톱 벌초</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/common.css">
    <style>
        .timeline {
            position: relative;
            padding: 20px 0;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            width: 2px;
            background: #e9ecef;
            height: 100%;
        }
        .timeline-item {
            margin-bottom: 30px;
            position: relative;
        }
        .timeline-content {
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .timeline-date {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 10px;
        }
        .timeline-tasks {
            list-style: none;
            padding: 0;
        }
        .timeline-tasks li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .timeline-tasks li:last-child {
            border-bottom: none;
        }
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        .status-completed {
            background-color: #2ecc71;
            color: white;
        }
        .status-in-progress {
            background-color: #3498db;
            color: white;
        }
        .status-pending {
            background-color: #95a5a6;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container py-5">
        <h1 class="mb-4">개발 계획</h1>
        <div class="timeline" id="development-timeline">
            <!-- 개발 계획이 여기에 동적으로 로드됩니다 -->
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module">
        import { db } from '/scripts/firebase-config.js';
        import { doc, getDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/11.5.0/firebase-firestore.js';

        // 개발 계획 로드
        async function loadDevelopmentPlan() {
            const timeline = document.getElementById('development-timeline');
            const docRef = doc(db, 'system', 'developmentPlan');
            
            onSnapshot(docRef, (doc) => {
                if (doc.exists()) {
                    const plan = doc.data().plan;
                    timeline.innerHTML = '';
                    
                    Object.entries(plan).forEach(([date, tasks]) => {
                        const timelineItem = document.createElement('div');
                        timelineItem.className = 'timeline-item';
                        
                        const content = document.createElement('div');
                        content.className = 'timeline-content';
                        
                        const dateElement = document.createElement('div');
                        dateElement.className = 'timeline-date';
                        dateElement.textContent = date;
                        
                        const tasksList = document.createElement('ul');
                        tasksList.className = 'timeline-tasks';
                        
                        tasks.forEach(task => {
                            const taskItem = document.createElement('li');
                            taskItem.textContent = task;
                            
                            // 작업 상태에 따라 배지 추가
                            const status = getTaskStatus(task);
                            if (status) {
                                const badge = document.createElement('span');
                                badge.className = `status-badge status-${status}`;
                                badge.textContent = getStatusText(status);
                                taskItem.appendChild(badge);
                            }
                            
                            tasksList.appendChild(taskItem);
                        });
                        
                        content.appendChild(dateElement);
                        content.appendChild(tasksList);
                        timelineItem.appendChild(content);
                        timeline.appendChild(timelineItem);
                    });
                }
            });
        }

        // 작업 상태 확인
        function getTaskStatus(task) {
            const completedTasks = [
                '작업자 대시보드 구현',
                '캘린더 기능 추가',
                '작업 지도 기능 구현',
                '실시간 알림 시스템 구축',
                '데이터베이스 초기화 스크립트 작성'
            ];
            
            const inProgressTasks = [
                '작업자-고객 매칭 시스템 구현',
                '작업 상태 관리 기능 추가'
            ];
            
            if (completedTasks.includes(task)) return 'completed';
            if (inProgressTasks.includes(task)) return 'in-progress';
            return 'pending';
        }

        // 상태 텍스트 반환
        function getStatusText(status) {
            const statusTexts = {
                'completed': '완료',
                'in-progress': '진행중',
                'pending': '예정'
            };
            return statusTexts[status];
        }

        // 페이지 로드 시 개발 계획 표시
        document.addEventListener('DOMContentLoaded', loadDevelopmentPlan);
    </script>
</body>
</html> 